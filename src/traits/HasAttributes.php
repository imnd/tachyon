<?phpnamespace tachyon\traits;/** * Трейт атрибутов * * @author Андрей Сердюк * @copyright (c) 2020 IMND */trait HasAttributes{    /**     * массив [поле => значение] для соотв. аттрибутов модели     */    protected array $attributes = [];    /**     * список типов полей формы для соотв. аттрибутов модели     *     * @return array     */    protected array $attributeTypes = [];    /**     * список названий аттрибутов модели     *     * @return array     */    protected array $attributeNames = [];    /**     * @param $var     *     * @return mixed|null     */    public function __get($var)    {        // в случае, если есть такое поле и его значение задано        return $this->attributes[$var] ?? null;    }    /**     * @param $var     * @param $val     *     * @return mixed     */    public function __set($var, $val)    {        $method = 'set' . ucfirst($var);        if (method_exists($this, $method)) {            return $this->$method($val);        }        if (!isset($this->$var)) {            $this->attributes[$var] = $val;        }    }    public function __isset($var)    {        return isset($this->attributes[$var]);    }    /**     * Присваивание значения аттрибуту модели     *     * @param $attribute     * @param $value string     *     * @return mixed     */    public function setAttribute($attribute, $value)    {        $this->attributes[$attribute] = $value;        return $this;    }    /**     * Извлечение значения аттрибута $name     *     * @param string $name     *     * @return mixed     */    public function getAttribute(string $name)    {        return $this->attributes[$name];    }    /**     * Присваивание значений аттрибутам модели     *     * @param $attributes array     *     * @return mixed     */    public function setAttributes(array $attributes)    {        foreach ($attributes as $name => $value) {            if (array_key_exists($name, $this->attributes)) {                $this->attributes[$name] = $value;            }        }        return $this;    }    /**     * Возвращает аттрибуты модели     *     * @returns array     */    public function getAttributes(): array    {        return $this->attributes;    }    /**     * Возвращает название аттрибута модели     *     * @param $key string     *     * @return string     */    public function getAttributeName($key): string    {        if (array_key_exists($key, $this->attributeNames)) {            $attributeName = $this->attributeNames[$key];            if (is_array($attributeName)) {                return $attributeName[$this->lang->getLanguage()];            }            return $attributeName;        }        return ucfirst($key);    }    /**     * Возвращает типы аттрибутов модели     *     * @return array     */    public function getAttributeTypes(): array    {        return $this->attributeTypes;    }    /**     * возвращает тип аттрибута модели     *     * @param $key string     *     * @return null|string     */    public function getAttributeType($key): ?string    {        return $this->attributeTypes[$key] ?? null;    }}